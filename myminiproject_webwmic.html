<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI-Powered Personal Fact-Checker (Quiz Mode)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .transition-all {
            transition: all 0.3s ease-in-out;
        }
        /* Custom styles for the microphone button */
        #mic-button {
            padding: 0.75rem 1rem; /* Adjusted padding */
            background-color: #4CAF50; /* Green background */
            color: white;
            border: none;
            border-radius: 0.5rem; /* Rounded corners */
            font-size: 1.25rem; /* Larger icon */
            cursor: pointer;
            transition: background-color 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0; /* Prevent shrinking in flex container */
        }
        #mic-button:hover {
            background-color: #45a049; /* Darker green on hover */
        }
        #mic-button.listening {
            background-color: #ef4444; /* Red when listening */
            animation: pulse 1.5s infinite;
        }
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(239, 68, 68, 0); }
            100% { box-shadow: 0 0 0 0 rgba(239, 68, 68, 0); }
        }
        #mic-button:disabled {
            background-color: #9ca3af; /* Gray when disabled */
            cursor: not-allowed;
            animation: none;
        }
        .input-group {
            display: flex; /* Use flexbox for layout */
            gap: 1rem; /* Space between input and button */
            align-items: flex-end; /* Align items at the bottom */
        }
        .input-group textarea {
            flex-grow: 1; /* Allow textarea to take available space */
        }
    </style>
</head>
<body class="bg-blue-100 text-gray-800 antialiased">

    <div class="container mx-auto px-4 py-8 md:py-16 min-h-screen flex flex-col items-center">
        
        <header class="text-center mb-8">
            <h1 class="text-4xl md:text-5xl font-bold text-gray-900">AI Personal Fact-Checker (Quiz Mode)</h1>
            <p class="mt-2 text-lg text-gray-600 max-w-2xl mx-auto">Answer the question below and see if your fact is true or false!</p>
        </header>

        <main class="w-full max-w-2xl bg-white p-6 md:p-8 rounded-2xl shadow-lg border border-gray-200">
            <div id="fact-checker-tool">
                <div class="mb-4">
                    <label class="block text-sm font-medium text-gray-700 mb-1">Question:</label>
                    <p id="quiz-question" class="text-xl font-semibold text-gray-900 bg-gray-100 p-3 rounded-lg"></p>
                </div>
                <div>
                    <label for="claim-input" class="block text-sm font-medium text-gray-700 mb-1">Your Answer:</label>
                    <div class="input-group">
                        <textarea id="claim-input" name="claim-input" rows="2" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all bg-gray-100" placeholder="e.g., Paris"></textarea>
                        <button id="mic-button" title="Speak your answer">ðŸŽ¤</button>
                    </div>
                </div>
                <div class="mt-4">
                    <button id="check-button" class="w-full bg-black text-white font-semibold py-3 px-4 rounded-lg hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-all disabled:bg-gray-400">
                        Verify Answer
                    </button>
                </div>
            </div>

            <div id="result-container" class="mt-6 hidden">
                <div class="border-t pt-6">
                     <h3 class="text-sm font-semibold text-gray-500 mb-2">Verification Result:</h3>
                     <div id="verdict-card" class="p-4 rounded-lg transition-all">
                        <div class="flex items-center">
                            <span id="verdict-icon" class="text-2xl mr-3"></span>
                            <span id="verdict-text" class="text-xl font-bold"></span>
                        </div>
                        <p id="justification-text" class="mt-2 text-sm"></p>
                        <div class="mt-4">
                            <div class="flex justify-between items-center mb-1">
                                <span class="text-xs font-medium text-gray-600">Confidence</span>
                                <span id="confidence-value" class="text-xs font-bold text-gray-800"></span>
                            </div>
                            <div class="w-full bg-gray-200 rounded-full h-2.5">
                                <div id="confidence-bar" class="h-2.5 rounded-full transition-all"></div>
                            </div>
                        </div>
                     </div>
                </div>
            </div>
        </main>

        <footer class="w-full max-w-2xl mt-8 text-center text-gray-500 text-xs">
            <h4 class="font-bold text-sm mb-2">Limitations & Scope</h4>
            <p class="mb-2">This tool is for preliminary, personal use and cannot replace expert analysis. It is designed for simple, unambiguous claims and relies on the AI's existing knowledge, which may not be real-time or completely accurate. It does not check opinions.</p>
            <p>&copy; 2025 AI Mini-Project. All Rights Reserved.</p>
        </footer>

    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const checkButton = document.getElementById('check-button');
            const claimInput = document.getElementById('claim-input');
            const resultContainer = document.getElementById('result-container');
            const verdictCard = document.getElementById('verdict-card');
            const verdictIcon = document.getElementById('verdict-icon');
            const verdictText = document.getElementById('verdict-text');
            const justificationText = document.getElementById('justification-text');
            const confidenceValue = document.getElementById('confidence-value');
            const confidenceBar = document.getElementById('confidence-bar');
            const quizQuestionDisplay = document.getElementById('quiz-question');
            const micButton = document.getElementById('mic-button');

            // --- Encyclopedia of Random Questions ---
            const quizQuestions = [
                {
                    question: "What is the capital of France?",
                    correctAnswer: "paris",
                    correctResponse: {
                        verdict: 'Correct!',
                        justification: 'That\'s right! Paris is indeed the capital of France.',
                        confidence: 100,
                        icon: 'âœ…',
                        colors: { bg: 'bg-green-50', text: 'text-green-800', bar: 'bg-green-600' }
                    },
                    incorrectResponse: {
                        verdict: 'Incorrect',
                        justification: 'That\'s not correct. The capital of France is Paris.',
                        confidence: 10,
                        icon: 'âŒ',
                        colors: { bg: 'bg-red-50', text: 'text-red-800', bar: 'bg-red-600' }
                    }
                },
                {
                    question: "Which planet is known as the Red Planet?",
                    correctAnswer: "mars",
                    correctResponse: {
                        verdict: 'Correct!',
                        justification: 'Mars is often called the Red Planet due to its iron-rich soil.',
                        confidence: 100,
                        icon: 'âœ…',
                        colors: { bg: 'bg-green-50', text: 'text-green-800', bar: 'bg-green-600' }
                    },
                    incorrectResponse: {
                        verdict: 'Incorrect',
                        justification: 'The Red Planet is Mars.',
                        confidence: 10,
                        icon: 'âŒ',
                        colors: { bg: 'bg-red-50', text: 'text-red-800', bar: 'bg-red-600' }
                    }
                },
                {
                    question: "What is the largest ocean on Earth?",
                    correctAnswer: "pacific ocean",
                    correctResponse: {
                        verdict: 'Correct!',
                        justification: 'The Pacific Ocean is the largest and deepest of Earth\'s oceanic divisions.',
                        confidence: 100,
                        icon: 'âœ…',
                        colors: { bg: 'bg-green-50', text: 'text-green-800', bar: 'bg-green-600' }
                    },
                    incorrectResponse: {
                        verdict: 'Incorrect',
                        justification: 'The largest ocean on Earth is the Pacific Ocean.',
                        confidence: 10,
                        icon: 'âŒ',
                        colors: { bg: 'bg-red-50', text: 'text-red-800', bar: 'bg-red-600' }
                    }
                },
                {
                    question: "How many continents are there in the world?",
                    correctAnswer: "7",
                    correctResponse: {
                        verdict: 'Correct!',
                        justification: 'There are seven continents: Asia, Africa, North America, South America, Antarctica, Europe, and Australia.',
                        confidence: 100,
                        icon: 'âœ…',
                        colors: { bg: 'bg-green-50', text: 'text-green-800', bar: 'bg-green-600' }
                    },
                    incorrectResponse: {
                        verdict: 'Incorrect',
                        justification: 'There are 7 continents in the world.',
                        confidence: 10,
                        icon: 'âŒ',
                        colors: { bg: 'bg-red-50', text: 'text-red-800', bar: 'bg-red-600' }
                    }
                },
                {
                    question: "What is the chemical symbol for water?",
                    correctAnswer: "h2o",
                    correctResponse: {
                        verdict: 'Correct!',
                        justification: 'H2O is the chemical formula for water, meaning two hydrogen atoms and one oxygen atom.',
                        confidence: 100,
                        icon: 'âœ…',
                        colors: { bg: 'bg-green-50', text: 'text-green-800', bar: 'bg-green-600' }
                    },
                    incorrectResponse: {
                        verdict: 'Incorrect',
                        justification: 'The chemical symbol for water is H2O.',
                        confidence: 10,
                        icon: 'âŒ',
                        colors: { bg: 'bg-red-50', text: 'text-red-800', bar: 'bg-red-600' }
                    }
                }
            ];

            const emptyResponse = {
                verdict: 'Please enter an answer',
                justification: 'You need to type something into the answer box to get a verification.',
                confidence: 0,
                icon: 'ðŸ¤”',
                colors: { bg: 'bg-yellow-50', text: 'text-yellow-800', bar: 'bg-yellow-500' }
            };

            let currentQuestionIndex;

            // Function to select and display a new random question
            const loadNewQuestion = () => {
                const randomIndex = Math.floor(Math.random() * quizQuestions.length);
                currentQuestionIndex = randomIndex; // Store the index of the current question
                const questionData = quizQuestions[currentQuestionIndex];
                
                quizQuestionDisplay.textContent = questionData.question;
                claimInput.value = ''; // Clear the input field
                resultContainer.classList.add('hidden'); // Hide previous result
                checkButton.disabled = false;
                checkButton.textContent = 'Verify Answer';
                claimInput.focus(); // Focus on the input for immediate typing
            };
            
            const handleFactCheck = () => {
                const inputText = claimInput.value.trim().toLowerCase();
                const currentQuestionData = quizQuestions[currentQuestionIndex]; // Get data for the current question
                
                // Handle empty input
                if (!inputText) {
                    displayResults(emptyResponse);
                    return; // Stop execution if input is empty
                }
                
                checkButton.disabled = true;
                checkButton.textContent = 'Verifying...';
                resultContainer.classList.add('hidden');

                setTimeout(() => {
                    let response;
                    // Check if the user's answer matches the correct answer
                    if (inputText === currentQuestionData.correctAnswer) {
                        response = currentQuestionData.correctResponse;
                    } else {
                        response = currentQuestionData.incorrectResponse;
                    }

                    displayResults(response);
                    
                    // After displaying results, prepare for the next question
                    // This creates a "Next Question" button or automatically loads after a delay
                    setTimeout(() => {
                        loadNewQuestion(); // Load a new question after a short delay
                    }, 3000); // Wait 3 seconds before loading new question
                    
                }, 1500); // Simulate AI processing time
            };

            const displayResults = (result) => {
                verdictIcon.textContent = result.icon;
                verdictText.textContent = result.verdict;
                justificationText.textContent = result.justification;
                confidenceValue.textContent = `${result.confidence}%`;
                
                confidenceBar.style.width = `${result.confidence}%`;
                
                // Remove all previous background and text colors before adding new ones
                verdictCard.className = 'p-4 rounded-lg transition-all'; // Reset classes
                confidenceBar.className = 'h-2.5 rounded-full transition-all'; // Reset classes
                verdictText.className = 'text-xl font-bold'; // Reset classes

                // Add new classes based on the result
                verdictCard.classList.add(result.colors.bg, result.colors.text);
                confidenceBar.classList.add(result.colors.bar);
                verdictText.classList.add(result.colors.text);


                resultContainer.classList.remove('hidden');
            };

            checkButton.addEventListener('click', handleFactCheck);
            claimInput.addEventListener('keydown', (e) => {
                if (e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    handleFactCheck();
                }
            });

            // --- Speech Recognition Logic ---
            let recognition;

            // Check if SpeechRecognition API is available
            if ('SpeechRecognition' in window || 'webkitSpeechRecognition' in window) {
                const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
                recognition = new SpeechRecognition();

                recognition.continuous = false; // Only get one result at a time
                recognition.lang = 'en-US'; // Set language
                recognition.interimResults = false; // Only return final results

                recognition.onstart = () => {
                    micButton.classList.add('listening');
                    micButton.disabled = true; // Disable button while listening
                    claimInput.placeholder = 'Listening... Speak your answer now.';
                };

                recognition.onresult = (event) => {
                    const speechResult = event.results[0][0].transcript;
                    claimInput.value = speechResult; // Populate the input field with spoken text
                    micButton.classList.remove('listening');
                    micButton.disabled = false;
                    claimInput.placeholder = 'e.g., Paris';
                    // Automatically trigger verification after speech input
                    handleFactCheck(); 
                };

                recognition.onend = () => {
                    micButton.classList.remove('listening');
                    micButton.disabled = false;
                    claimInput.placeholder = 'e.g., Paris';
                };

                recognition.onerror = (event) => {
                    console.error('Speech recognition error:', event.error);
                    claimInput.placeholder = 'Speech error. Try typing or click mic again.';
                    micButton.classList.remove('listening');
                    micButton.disabled = false;
                };

                micButton.addEventListener('click', () => {
                    claimInput.value = ''; // Clear input before listening
                    recognition.start();
                });

            } else {
                // If SpeechRecognition is not supported, hide the button or inform the user
                micButton.style.display = 'none';
                console.warn('Web Speech API not supported in this browser.');
            }
            // --- End Speech Recognition Logic ---

            // Load the first question when the page loads
            loadNewQuestion();
        });
    </script>
</body>
</html> 